"use strict";(self.webpackChunkfreshCart=self.webpackChunkfreshCart||[]).push([[953],{779:(f,_,i)=>{i.d(_,{N:()=>p});var l=i(5619),t=i(4769),d=i(9862),c=i(2425);let p=(()=>{class o{constructor(a,h){this._HttpClient=a,this.toastr=h,this.baseUrl="https://ecommerce.routemisr.com",this.numberofcartItems=new l.X(0)}addToCart(a){return this._HttpClient.post(`${this.baseUrl}/api/v1/cart`,{productId:a})}getLoggedUserCart(){return this._HttpClient.get(`${this.baseUrl}/api/v1/cart`)}removeItemFromCart(a){return this._HttpClient.delete(`${this.baseUrl}/api/v1/cart/${a}`)}removeCart(){return this._HttpClient.delete(`${this.baseUrl}/api/v1/cart`)}updateCartProductQuantity(a,h){return this._HttpClient.put(`${this.baseUrl}/api/v1/cart/${a}`,{count:h})}static#t=this.\u0275fac=function(h){return new(h||o)(t.LFG(d.eN),t.LFG(c._W))};static#s=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})()},1171:(f,_,i)=>{i.d(_,{M:()=>d});var l=i(4769),t=i(9862);let d=(()=>{class c{constructor(o){this._HttpClient=o,this.baseUrl="https://ecommerce.routemisr.com",this.header={token:localStorage.getItem("userToken")||"null"}}AddProductToWishList(o){return this._HttpClient.post(`${this.baseUrl}/api/v1/wishlist`,{productId:o},{headers:this.header})}GetloggedUserToWishList(){return this._HttpClient.get(`${this.baseUrl}/api/v1/wishlist`,{headers:this.header})}RemoveProductFromWishList(o){return this._HttpClient.delete(`${this.baseUrl}/api/v1/wishlist/${o}`,{headers:this.header})}static#t=this.\u0275fac=function(g){return new(g||c)(l.LFG(t.eN))};static#s=this.\u0275prov=l.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()},7953:(f,_,i)=>{i.r(_),i.d(_,{WishListComponent:()=>C});var l=i(6814),t=i(4769),d=i(1171),c=i(779),p=i(2425);function o(r,u){1&r&&(t.TgZ(0,"div",4),t._UZ(1,"span",5),t.qZA())}function g(r,u){if(1&r&&(t.TgZ(0,"div",6)(1,"p"),t._uU(2),t.qZA()()),2&r){const s=t.oxw();t.xp6(2),t.Oqu(s.errorMessage)}}function a(r,u){if(1&r){const s=t.EpF();t.TgZ(0,"div",10)(1,"div",11)(2,"div"),t._UZ(3,"img",12),t.qZA()(),t.TgZ(4,"div",13)(5,"div",14)(6,"div")(7,"h2",15),t._uU(8),t.qZA(),t.TgZ(9,"span",16),t._uU(10),t.qZA(),t.TgZ(11,"span",17),t.NdJ("click",function(){const m=t.CHM(s).$implicit,v=t.oxw(2);return t.KtG(v.removeItemFromwishlist(m._id))}),t._uU(12,"Remove "),t._UZ(13,"i",18),t.qZA()(),t.TgZ(14,"div",19)(15,"button",20),t.NdJ("click",function(){const m=t.CHM(s).$implicit,v=t.oxw(2);return t.KtG(v.AddProductsToCart(m._id))}),t._uU(16,"Add To Cart"),t.qZA()()()(),t.TgZ(17,"div"),t._UZ(18,"hr",21),t.qZA()()}if(2&r){const s=u.$implicit;t.xp6(3),t.Q6J("src",s.imageCover,t.LSH),t.xp6(5),t.Oqu(s.title),t.xp6(2),t.hij("",s.price,"EGP")}}function h(r,u){if(1&r&&(t.TgZ(0,"div",7)(1,"h2",8),t._uU(2,"My wish List"),t.qZA(),t.YNc(3,a,19,3,"div",9),t.qZA()),2&r){const s=t.oxw();t.xp6(3),t.Q6J("ngForOf",s.wishList)}}let C=(()=>{class r{ngOnInit(){this.getallwishList()}constructor(s,e,n){this._WishlistService=s,this._CartService=e,this._ToastrService=n,this.isloading=!0,this.errorMessage="",this.wishList=[],this.wishlistData=[]}getallwishList(){this._WishlistService.GetloggedUserToWishList().subscribe({next:s=>{this.isloading=!1,this.wishList=s.data,console.log(this.wishList)},error:s=>{this.isloading=!1,this.errorMessage="Your wishList is Empty"}})}removeItemFromwishlist(s){this.isloading=!0,this._WishlistService.RemoveProductFromWishList(s).subscribe({next:e=>{this.wishlistData=e.data;const n=this.wishList.filter(m=>this.wishlistData.includes(m._id));this.wishList=n,this.isloading=!1},error:e=>{this.isloading=!1}})}AddProductsToCart(s){this._CartService.addToCart(s).subscribe({next:e=>{this._CartService.numberofcartItems.next(e.numOfCartItems),this._ToastrService.success(e.message," ",{timeOut:1500,progressBar:!0,positionClass:"toast-bottom-right"})},error:e=>{console.log(e)}})}static#t=this.\u0275fac=function(e){return new(e||r)(t.Y36(d.M),t.Y36(c.N),t.Y36(p._W))};static#s=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-wish-list"]],standalone:!0,features:[t.jDz],decls:4,vars:3,consts:[["class","loadingScreen bg-white position-fixed top-0 bottom-0 start-0 end-0 d-flex justify-content-center align-items-center",4,"ngIf"],[1,"p-3","mt-3"],["class","alert alert-danger text-white mt-4",4,"ngIf"],["class","bg-light",4,"ngIf"],[1,"loadingScreen","bg-white","position-fixed","top-0","bottom-0","start-0","end-0","d-flex","justify-content-center","align-items-center"],[1,"loader"],[1,"alert","alert-danger","text-white","mt-4"],[1,"bg-light"],[1,"fw-bold","p-3"],["class","row p-3  mt-3",4,"ngFor","ngForOf"],[1,"row","p-3","mt-3"],[1,"col-md-2"],["alt","productimg",1,"w-100",3,"src"],[1,"col-md-10"],[1,"d-flex","justify-content-between","mt-4"],[1,"font-sm","fw-bold"],[1,"d-block","mt-3","mb-3","text-main","fw-bold"],[1,"text-danger","fw-bold","small","cursor-pointer",3,"click"],[1,"fa","fa-trash"],[1,"p-3","mt-4"],[1,"btn","btn-outline-success",3,"click"],[1,"mt-3","w-100"]],template:function(e,n){1&e&&(t.YNc(0,o,2,0,"div",0),t.TgZ(1,"section",1),t.YNc(2,g,3,1,"div",2),t.YNc(3,h,4,1,"div",3),t.qZA()),2&e&&(t.Q6J("ngIf",n.isloading),t.xp6(2),t.Q6J("ngIf",n.errorMessage&&0===n.wishList.length),t.xp6(1),t.Q6J("ngIf",!n.errorMessage&&n.wishList.length>0))},dependencies:[l.ez,l.sg,l.O5]})}return r})()}}]);